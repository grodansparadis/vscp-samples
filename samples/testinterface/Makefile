### Begin DialogBlocks generated body
################################################################################
# Makefile generated by DialogBlocks
#
# Available configurations:
# release
# debug
################################################################################

CONFIG=release

# release
ifeq ($(CONFIG),release)
WXWIN=D:/wxWidgets-2.8.7
TOOLCHAINNAME=mswu
WXVERSION:=$(shell echo `$(WXWIN)/GCCBuildReleaseMSWUnicode/wx-config --version`)
CXX=g++.exe
RESCOMP=windres.exe
RCFILEOBJ=testInterface_rc.o
RCFILESRC=testInterface.rc
RESOURCEOBJECT= $(OBJECTPATH)/$(RCFILEOBJ)
OUTPUTPATH=GCCRelease
OBJECTPATH=GCCRelease
BUILDPATHS=$(OBJECTPATH)
PROGRAM=testInterface.exe
LIBS=`$(WXWIN)/GCCBuildReleaseMSWUnicode/wx-config --inplace --exec-prefix="$(WXWIN)/GCCBuildReleaseMSWUnicode" --libs`
LINKERFLAGS=-Wl,--subsystem,windows -mwindows
WARNINGFLAGS=-Wall
OPTFLAGS=-O
DEBUGFLAGS=
LIBPATH=
CPPINC=`$(WXWIN)/GCCBuildReleaseMSWUnicode/wx-config --inplace --cxxflags`
GCCFLAGS=
LDFLAGS=$(LIBS) $(LIBPATH) $(LINKERFLAGS)
CPPFLAGS=$(CPPINC) $(GCCFLAGS) $(DEBUGFLAGS) $(OPTFLAGS) $(WARNINGFLAGS)
LIBDIRNAME=$(WXWIN)/GCCBuildReleaseMSWUnicode/lib
RESPATH=--include-dir "$(WXWIN)/include" --include-dir "$(WXWIN)/contrib/include" --include-dir "$(WXWIN)/GCCBuildReleaseMSWUnicode/lib/wx/include/msw-unicode-release-static-2.8"
MACPACKAGEINFO=

# debug
else
WXWIN=D:/wxWidgets-2.8.7
TOOLCHAINNAME=mswud
WXVERSION:=$(shell echo `$(WXWIN)/GCCBuildDebugMSWUnicode/wx-config --version`)
CXX=g++.exe
RESCOMP=windres.exe
RCFILEOBJ=testInterface_rc.o
RCFILESRC=testInterface.rc
RESOURCEOBJECT= $(OBJECTPATH)/$(RCFILEOBJ)
OUTPUTPATH=GCCDebug
OBJECTPATH=GCCDebug
BUILDPATHS=$(OBJECTPATH)
PROGRAM=testInterface.exe
LIBS=`$(WXWIN)/GCCBuildDebugMSWUnicode/wx-config --inplace --exec-prefix="$(WXWIN)/GCCBuildDebugMSWUnicode" --libs`
LINKERFLAGS=-Wl,--subsystem,windows -mwindows
WARNINGFLAGS=-Wall
OPTFLAGS=-O0
DEBUGFLAGS=-ggdb
LIBPATH=
CPPINC=`$(WXWIN)/GCCBuildDebugMSWUnicode/wx-config --inplace --cxxflags`
GCCFLAGS=
LDFLAGS=$(LIBS) $(LIBPATH) $(LINKERFLAGS)
CPPFLAGS=$(CPPINC) $(GCCFLAGS) $(DEBUGFLAGS) $(OPTFLAGS) $(WARNINGFLAGS)
LIBDIRNAME=$(WXWIN)/GCCBuildDebugMSWUnicode/lib
RESPATH=--include-dir "$(WXWIN)/include" --include-dir "$(WXWIN)/contrib/include" --include-dir "$(WXWIN)/GCCBuildDebugMSWUnicode/lib/wx/include/msw-unicode-debug-static-2.8"
MACPACKAGEINFO=
endif

OBJECTS=$(OBJECTPATH)/testinterfaceapp.o $(OBJECTPATH)/testinterface.o $(OBJECTPATH)/canalsuperwrapper.o $(OBJECTPATH)/dllwrapper.o $(OBJECTPATH)/vscphelper.o $(RESOURCEOBJECT)

all:	$(BUILDPATHS) $(MACPACKAGEINFO) $(OUTPUTPATH)/$(PROGRAM)

$(OBJECTPATH):
	mkdir -p $(OBJECTPATH)

clean:
	rm -f $(OBJECTPATH)/*.o
	rm -f $(OBJECTPATH)/*.res
	rm -fr .deps .pch
	rm -fr $(PROGRAM).app
	rm -f $(OUTPUTPATH)/$(PROGRAM)

help:
	@echo "Usage: make -f Makefile CONFIG=[release|debug] [all|clean|help]"

$(OUTPUTPATH)/$(PROGRAM):	$(OBJECTS)
	$(CXX) -o $@ $(OBJECTS) $(LDFLAGS)


# Windows only
$(OBJECTPATH)/$(RCFILEOBJ):	$(RCFILESRC)
	$(RESCOMP) --use-temp-file -i$< -o$@ $(RESPATH) --include-dir . --define NOPCH

# Mac only
$(OUTPUTPATH)/$(PROGRAM).app/Contents/PkgInfo: $(OUTPUTPATH)/$(PROGRAM) $(INFOPLISTSOURCE) $(ICNSSOURCE)
	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents
	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents/MacOS
	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents/Resources
	sed -e "s/IDENTIFIER/$(PROGRAM)/" \
	-e "s/EXECUTABLE/$(PROGRAM)/" \
	-e "s/VERSION/$(WXVERSION)/" \
	$(INFOPLISTSOURCE) >$(OUTPUTPATH)/$(PROGRAM).app/Contents/Info.plist
	echo -n "APPL????" >$(OUTPUTPATH)/$(PROGRAM).app/Contents/PkgInfo
	ln -f $(OUTPUTPATH)/$(PROGRAM) $(OUTPUTPATH)/$(PROGRAM).app/Contents/MacOS/$(PROGRAM)
	cp -f $(ICNSSOURCE) $(ICNSDEST)

$(OBJECTPATH)/testinterfaceapp.o:	testinterfaceapp.cpp testinterfaceapp.h testinterface.h
	$(CXX) -c -o $@ $(CPPFLAGS) testinterfaceapp.cpp

$(OBJECTPATH)/testinterface.o:	testinterface.cpp testinterface.h
	$(CXX) -c -o $@ $(CPPFLAGS) testinterface.cpp

$(OBJECTPATH)/canalsuperwrapper.o:	../common/canalsuperwrapper.cpp ../common/vscp.h ../common/vscp_classes.h ../common/vscp_types.h ../common/canal.h ../../common/crc.h ../common/canalsuperwrapper.h ../common/dllwrapper.h ../common/canaldlldef.h ../common/vscptcpif.h ../common/vscphelper.h ../common/guid.h ../../common/dllist.h ../common/devitem.h
	$(CXX) -c -o $@ $(CPPFLAGS) ../common/canalsuperwrapper.cpp

$(OBJECTPATH)/dllwrapper.o:	../common/dllwrapper.cpp ../common/dllwrapper.h ../common/canaldlldef.h ../common/canal.h
	$(CXX) -c -o $@ $(CPPFLAGS) ../common/dllwrapper.cpp

$(OBJECTPATH)/vscphelper.o:	../common/vscphelper.cpp ../common/vscp.h ../common/vscp_classes.h ../common/vscp_types.h ../common/canal.h ../../common/crc.h ../common/vscphelper.h
	$(CXX) -c -o $@ $(CPPFLAGS) ../common/vscphelper.cpp

.PHONY:	all clean
### End DialogBlocks generated body
